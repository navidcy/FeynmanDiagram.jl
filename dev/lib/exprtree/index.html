<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Diagrams as an Expression Tree · FeynmanDiagram.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://numericaleft.github.io/FeynmanDiagram.jl/lib/exprtree/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">FeynmanDiagram.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span></li><li><span class="tocitem">API reference</span><ul><li><a class="tocitem" href="../parquet/">Parquet Algorithm to Build Diagrams</a></li><li><a class="tocitem" href="../diagtree/">Diagrams as an AbstractTree</a></li><li class="is-active"><a class="tocitem" href>Diagrams as an Expression Tree</a><ul class="internal"><li><a class="tocitem" href="#API"><span>API</span></a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API reference</a></li><li class="is-active"><a href>Diagrams as an Expression Tree</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Diagrams as an Expression Tree</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/numericalEFT/FeynmanDiagram.jl/blob/master/docs/src/lib/exprtree.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Diagrams-as-an-Expression-Tree"><a class="docs-heading-anchor" href="#Diagrams-as-an-Expression-Tree">Diagrams as an Expression Tree</a><a id="Diagrams-as-an-Expression-Tree-1"></a><a class="docs-heading-anchor-permalink" href="#Diagrams-as-an-Expression-Tree" title="Permalink"></a></h1><h2 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="FeynmanDiagram.ExprTree.CachedPool" href="#FeynmanDiagram.ExprTree.CachedPool"><code>FeynmanDiagram.ExprTree.CachedPool</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct CachedPool{O,T}

    Use this pool to host the objects that are heavy to evaluate so that one wants to cache their status.
    The user should defines a compare</code></pre><p><strong>Members</strong></p><ul><li>name::Symbol : name of the pool</li><li>object::O    : object</li><li>current::T      : current status</li><li>new::T       : the new status wants to assign later</li><li>version::Int128 : the current version</li><li>excited::Bool   : if set to excited, then the current status needs to be replaced with the new status</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/numericalEFT/FeynmanDiagram.jl/blob/ff5994635e8977cdea635568a92aa83c769acaff/src/expression_tree/pool.jl#L1-L14">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FeynmanDiagram.ExprTree.Diagrams" href="#FeynmanDiagram.ExprTree.Diagrams"><code>FeynmanDiagram.ExprTree.Diagrams</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct Diagrams{V,P,PARA,F,W}

Diagram Object represents a set of Feynman diagrams in a tree (forest) structure</code></pre><p><strong>Members</strong></p><ul><li>basisPool::V      : Tuple of pools of cached basis  in a format of (BasisPool1, BasisPool2, ...)</li><li>propagatorPool::P : Tuple of pools of cached propagators in a format of (PropagatorPool1, PropagatorPool2, ...)</li><li>nodePool::Pool{Node{PARA,F},W} : Pool of the nodes in the diagram tree</li><li>root::Vector{Int} : indices of the cached nodes that are the root(s) of the diagram tree. Each element corresponds to one root.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/numericalEFT/FeynmanDiagram.jl/blob/ff5994635e8977cdea635568a92aa83c769acaff/src/expression_tree/object.jl#L97-L107">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FeynmanDiagram.ExprTree.LoopPool" href="#FeynmanDiagram.ExprTree.LoopPool"><code>FeynmanDiagram.ExprTree.LoopPool</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct LoopPool{T}

Pool of loop basis. Each loop basis corresponds to a loop variable.
A loop variable is a linear combination of N independent loops. The combination coefficients is what we call a loop basis.
For example, if a loop is a momentum K, then

varibale_i = K_1*basis[1, i] + K_2*basis[2, i] + K_3*basis[3, i] + ...</code></pre><p><strong>Members</strong></p><ul><li>name::Symbol : name of the pool</li><li>dim::Int     : dimension of a loop variable (for example, the dimension of a momentum-frequency loop variable is (d+1) where d is the spatial dimension)</li><li>N::Int       : number of independent loops (dimension of loop basis)</li><li>basis::Matrix{T}    : Matrix of (N x Nb) that stores the loop basis, where Nb is the number of loop basis (or number of loop variables).</li><li>current::Matrix{T}  : Matrix of (dim x Nb) that stores the loop variables, where Nb is the number of loop basis (or number of loop variables).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/numericalEFT/FeynmanDiagram.jl/blob/ff5994635e8977cdea635568a92aa83c769acaff/src/expression_tree/pool.jl#L100-L115">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FeynmanDiagram.ExprTree.Node" href="#FeynmanDiagram.ExprTree.Node"><code>FeynmanDiagram.ExprTree.Node</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct Node{PARA,F}

Node Object, which is the building block of the diagram tree. Each node is a collection of CACHED proapgator objects and other child CACHED node objects</code></pre><p><strong>Members</strong></p><ul><li>para::PARA     : user-defined parameters, which will be used to evaluate the factor and the weight of the node (e.g., if the node represents a vertex function, then the parameter may be the momentum basis of the external legs)</li><li>operation::Int : #1: multiply, 2: add, ...</li><li>factor::F      : additional factor of the node</li><li>components::Vector{Vector{Int}}  : Index to the cached propagators stored in certain pools. Each Vector{Int} is for one kind of propagator.</li><li>childNodes::Vector{Int}  : Indices to the cached nodes stored in certain pool. They are the child of the current node in the diagram tree.</li><li>parent::Int : Index to the cached nodes which is the parent of the current node.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/numericalEFT/FeynmanDiagram.jl/blob/ff5994635e8977cdea635568a92aa83c769acaff/src/expression_tree/object.jl#L41-L53">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FeynmanDiagram.ExprTree.Propagator" href="#FeynmanDiagram.ExprTree.Propagator"><code>FeynmanDiagram.ExprTree.Propagator</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">mutable struct Propagator{PARA,F}

 Object of all kinds of propagators (many-body Green&#39;s functions, interactions, vertex functions, ...)</code></pre><p><strong>Members</strong></p><ul><li>para::PARA : User-defined parameters, which will be used to evaluate the factor and the weight of the propagator</li><li>order::Int : The order of the propagators (for example, in a Feynman diagrammatic expansion, the one-body Green&#39;s function usually has order zero, and an interaction usually has order one)</li><li>factor::F : Additional factor of the propagator</li><li>basis::Vector{Int} : Index to the cached basis stored in certain pool. They are essentail for the weight evaluation of the propagator (the first index for the first basis type, the second index for the second basis type, etc.). </li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/numericalEFT/FeynmanDiagram.jl/blob/ff5994635e8977cdea635568a92aa83c769acaff/src/expression_tree/object.jl#L1-L11">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FeynmanDiagram.ExprTree.addNode!" href="#FeynmanDiagram.ExprTree.addNode!"><code>FeynmanDiagram.ExprTree.addNode!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function addNode!(diag::Diagrams, operator, name, factor = 1.0; propagator = nothing, child = [], parent = 0, para = nothing)

Add a node into the diagram tree.</code></pre><p><strong>Arguments</strong></p><ul><li>diag::Diagrams : Diagram tree.</li><li>operator::Int  : #1: multiply, 2: add, ...</li><li>name           : name of the node</li><li>factor = 1.0   : Factor of the node</li><li>propagator = nothing  : Index to the cached propagators stored in certain pools. It should be in the format of Vector{Vector{Int}}, where each Vector{Int} is for one kind of propagator.</li><li>child = []        : Indices to the cached nodes stored in certain pool. They are the child of the current node in the diagram tree. It should be in the format of Vector{Int}.</li><li>para = nothing    : Additional paramenter required to evaluate the node. Set to nothing by default.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/numericalEFT/FeynmanDiagram.jl/blob/ff5994635e8977cdea635568a92aa83c769acaff/src/expression_tree/object.jl#L224-L237">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FeynmanDiagram.ExprTree.addNodeByName!" href="#FeynmanDiagram.ExprTree.addNodeByName!"><code>FeynmanDiagram.ExprTree.addNodeByName!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function addNodeByName(diag::Diagrams, operator, name = :none; child = [], factor = 1.0, parent = 0, para = nothing, kwargs...)

An alternative way to add node. Instead of providing the components vector, one specify the propagators in kwargs.</code></pre><p><strong>Arguments</strong></p><ul><li>diag::Diagrams : Diagram tree.</li><li>operator::Int  : #1: multiply, 2: add, ...</li><li>name           : name of the node</li><li>factor = 1.0   : Factor of the node</li><li>child = []        : Indices to the cached nodes stored in certain pool. They are the child of the current node in the diagram tree. It should be in the format of Vector{Int}.</li><li>para = nothing    : Additional paramenter required to evaluate the node. Set to nothing by default.</li><li>kwargs...      : Accept arbitrary pair of parameters as: PropagatorPoolName = [index of the propagator1, index of the propagator2, ...]</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/numericalEFT/FeynmanDiagram.jl/blob/ff5994635e8977cdea635568a92aa83c769acaff/src/expression_tree/object.jl#L292-L305">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FeynmanDiagram.ExprTree.addPropagator!" href="#FeynmanDiagram.ExprTree.addPropagator!"><code>FeynmanDiagram.ExprTree.addPropagator!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function addPropagator!(diag::Diagrams, index::Int, order::Int, name, factor = 1; site = [], loop = nothing, para = nothing)

Add a propagator into the diagram tree.</code></pre><p><strong>Arguments</strong></p><ul><li>diag::Diagrams : Diagram tree.</li><li>index::Int     : Index of the propagator in the diagram tree.</li><li>order::Int     : Order of the propagator.</li><li>name = :none   : name of the propagator.</li><li>factor = 1     : Factor of the propagator.</li><li>site = []      : site basis (e.g, time and space coordinate) of the propagator.</li><li>loop = nothing : loop basis (e.g, momentum and frequency) of the propagator.</li><li>para = nothing : Additional paramenter required to evaluate the propagator.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/numericalEFT/FeynmanDiagram.jl/blob/ff5994635e8977cdea635568a92aa83c769acaff/src/expression_tree/object.jl#L160-L174">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FeynmanDiagram.ExprTree.addPropagator!" href="#FeynmanDiagram.ExprTree.addPropagator!"><code>FeynmanDiagram.ExprTree.addPropagator!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function addPropagator!(diag::Diagrams, poolName::Symbol, order::Int, name, factor = 1; site = [], loop = nothing, para = nothing)

Add a propagator into the diagram tree referenced by the pool name.</code></pre><p><strong>Arguments</strong></p><ul><li>diag::Diagrams : Diagram tree.</li><li>poolName::Symbol : name of the propagator pool</li><li>order::Int     : Order of the propagator.</li><li>name = :none   : name of the propagator.</li><li>factor = 1     : Factor of the propagator.</li><li>site = []      : site basis (e.g, time and space coordinate) of the propagator.</li><li>loop = nothing : loop basis (e.g, momentum and frequency) of the propagator.</li><li>para = nothing : Additional paramenter required to evaluate the propagator.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/numericalEFT/FeynmanDiagram.jl/blob/ff5994635e8977cdea635568a92aa83c769acaff/src/expression_tree/object.jl#L200-L214">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FeynmanDiagram.ExprTree.getNode-Tuple{FeynmanDiagram.ExprTree.Diagrams, Int64}" href="#FeynmanDiagram.ExprTree.getNode-Tuple{FeynmanDiagram.ExprTree.Diagrams, Int64}"><code>FeynmanDiagram.ExprTree.getNode</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function getNode(diag::Diagrams, nidx::Int)

get Node in the diag with the index nidx.</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/numericalEFT/FeynmanDiagram.jl/blob/ff5994635e8977cdea635568a92aa83c769acaff/src/expression_tree/object.jl#L319-L323">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FeynmanDiagram.ExprTree.getNodeWeight-Tuple{FeynmanDiagram.ExprTree.Diagrams, Int64}" href="#FeynmanDiagram.ExprTree.getNodeWeight-Tuple{FeynmanDiagram.ExprTree.Diagrams, Int64}"><code>FeynmanDiagram.ExprTree.getNodeWeight</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function getNodeWeight(diag::Diagrams, nidx::Int)

get Node weight in the diag with the index nidx.</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/numericalEFT/FeynmanDiagram.jl/blob/ff5994635e8977cdea635568a92aa83c769acaff/src/expression_tree/object.jl#L341-L345">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FeynmanDiagram.ExprTree.showTree-Tuple{FeynmanDiagram.ExprTree.Diagrams, Int64}" href="#FeynmanDiagram.ExprTree.showTree-Tuple{FeynmanDiagram.ExprTree.Diagrams, Int64}"><code>FeynmanDiagram.ExprTree.showTree</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">showTree(diag::Diagrams, _root = diag.root[end]; verbose = 0, depth = 999)

Visualize the diagram tree using ete3 python package</code></pre><p>#Arguments</p><ul><li><code>diag</code>: the Diagrams struct to visualize</li><li><code>_root</code>: the index of the root node to visualize</li><li><code>verbose=0</code>: the amount of information to show</li><li><code>depth=999</code>: deepest level of the diagram tree to show</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/numericalEFT/FeynmanDiagram.jl/blob/ff5994635e8977cdea635568a92aa83c769acaff/src/expression_tree/io.jl#L41-L51">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../diagtree/">« Diagrams as an AbstractTree</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.10 on <span class="colophon-date" title="Friday 28 January 2022 04:30">Friday 28 January 2022</span>. Using Julia version 1.7.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
